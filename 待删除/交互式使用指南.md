# 🎯 DeepSeek-OCR 交互式使用指南

## ✨ 新功能：交互式提示词选择

现在运行测试脚本时，可以直接选择识别模式，无需修改代码！

## 🚀 使用方法

### 1. 准备图片

```bash
# 将图片放入测试目录
cp your_image.png test_images/
```

### 2. 运行测试

```bash
bash test.sh
```

### 3. 选择识别模式

运行后会显示菜单：

```
============================================================
选择识别模式
============================================================

请选择 OCR 识别模式：

  1. 文档转 Markdown（推荐）
     - 保留文档格式和结构
     - 适用于：文档、PPT、报告

  2. 普通 OCR
     - 提取所有文字内容
     - 适用于：一般文字识别

  3. 无布局 OCR
     - 仅提取文字，不保留布局
     - 适用于：纯文本提取

  4. 图表解析
     - 解析图表、图形内容
     - 适用于：图表、统计图、流程图

  5. 详细描述
     - 获取图片的详细描述
     - 适用于：理解图片内容

请输入选项（1-5）[默认: 1]:
```

### 4. 等待识别完成

```
✓ 已选择: 文档转 Markdown

============================================================
开始 OCR 识别...
============================================================

[1/1] 处理: your_image.png
  识别模式: 文档转 Markdown
  正在识别...
  ✓ 识别完成
  ✓ 结果已保存到: ocr_output/your_image/
```

### 5. 查看结果

```bash
# 打开输出目录
open ocr_output/

# 或直接查看 Markdown 文件
cat ocr_output/your_image/result.mmd
```

## 📝 识别模式详解

### 模式 1：文档转 Markdown（推荐）⭐

**提示词**：`<image>\n<|grounding|>Convert the document to markdown.`

**用途**：
- 将文档转换为结构化的 Markdown 格式
- 保留标题、列表、段落等格式
- 提取图片并保存为独立文件

**适用场景**：
- 📄 Word 文档截图
- 📊 PPT 幻灯片
- 📰 网页文章
- 📋 技术文档

**输出示例**：
```markdown
## 标题

段落内容...

- 列表项 1
- 列表项 2

![](images/0.jpg)
```

---

### 模式 2：普通 OCR

**提示词**：`<image>\n<|grounding|>OCR this image.`

**用途**：
- 提取图片中的所有文字
- 保留基本的文本结构
- 识别文字位置

**适用场景**：
- 📷 普通文字截图
- 🏷️ 标签识别
- 📝 笔记扫描
- 🎫 票据识别

**输出特点**：
- 带位置标注（bounding boxes）
- 保留文字顺序
- 包含坐标信息

---

### 模式 3：无布局 OCR

**提示词**：`<image>\nFree OCR.`

**用途**：
- 仅提取文字，忽略布局
- 输出连续的文本流
- 不保留格式信息

**适用场景**：
- 📖 纯文本提取
- 🔍 快速文字识别
- ✍️ 手写识别
- 📑 简单文档

**输出特点**：
- 纯文本输出
- 无格式保留
- 处理速度快

---

### 模式 4：图表解析

**提示词**：`<image>\nParse the figure.`

**用途**：
- 解析图表、图形内容
- 提取数据信息
- 理解图表含义

**适用场景**：
- 📊 柱状图、折线图
- 🥧 饼图、雷达图
- 🔀 流程图、架构图
- 📈 统计图表

**输出特点**：
- 结构化数据
- 图表描述
- 数据提取

---

### 模式 5：详细描述

**提示词**：`<image>\nDescribe this image in detail.`

**用途**：
- 获取图片的详细描述
- 理解图片内容和含义
- 分析图片元素

**适用场景**：
- 🖼️ 复杂图片理解
- 🎨 设计稿分析
- 📸 照片描述
- 🔬 图像分析

**输出特点**：
- 详细的文字描述
- 包含颜色、布局、内容
- 场景理解

---

## 💡 选择建议

### 根据图片类型选择

| 图片类型 | 推荐模式 | 原因 |
|---------|---------|------|
| 文档截图 | 模式 1 ⭐ | 保留格式 |
| PPT 幻灯片 | 模式 1 ⭐ | 结构化输出 |
| 表格数据 | 模式 1 | 保留表格 |
| 图表统计 | 模式 4 | 提取数据 |
| 普通文字 | 模式 2 | 通用识别 |
| 手写笔记 | 模式 3 | 快速提取 |
| 复杂图片 | 模式 5 | 理解内容 |

### 根据需求选择

| 需求 | 推荐模式 | 说明 |
|-----|---------|------|
| 保留格式 | 模式 1 | Markdown 格式 |
| 快速识别 | 模式 3 | 纯文本 |
| 数据提取 | 模式 4 | 图表解析 |
| 内容理解 | 模式 5 | 详细描述 |

---

## 🎨 实际示例

### 示例 1：识别 PPT 幻灯片

```bash
# 1. 准备图片
cp presentation.png test_images/

# 2. 运行测试
bash test.sh

# 3. 选择模式 1
请输入选项（1-5）[默认: 1]: 1

# 4. 结果
✓ 已选择: 文档转 Markdown
```

**输出**：保留标题、列表、格式的 Markdown 文档

---

### 示例 2：识别图表

```bash
# 1. 准备图表
cp chart.png test_images/

# 2. 运行测试
bash test.sh

# 3. 选择模式 4
请输入选项（1-5）[默认: 1]: 4

# 4. 结果
✓ 已选择: 图表解析
```

**输出**：图表数据和描述

---

### 示例 3：批量处理

```bash
# 1. 准备多张图片
cp doc1.png doc2.png doc3.png test_images/

# 2. 运行测试
bash test.sh

# 3. 选择模式（所有图片使用相同模式）
请输入选项（1-5）[默认: 1]: 1

# 4. 处理所有图片
[1/3] 处理: doc1.png
[2/3] 处理: doc2.png
[3/3] 处理: doc3.png
```

---

## 🔧 高级用法

### 快速使用默认模式

直接按回车使用默认的"文档转 Markdown"模式：

```bash
bash test.sh
# 直接按回车 ⏎
```

### 取消识别

在选择模式时按 `Ctrl+C` 可以取消：

```bash
请输入选项（1-5）[默认: 1]: ^C

已取消
```

---

## 📊 性能参考

| 模式 | 速度 | 精度 | 输出质量 |
|-----|------|------|---------|
| 模式 1 | 中等 | 高 | ⭐⭐⭐⭐⭐ |
| 模式 2 | 中等 | 高 | ⭐⭐⭐⭐ |
| 模式 3 | 快 | 中 | ⭐⭐⭐ |
| 模式 4 | 慢 | 高 | ⭐⭐⭐⭐⭐ |
| 模式 5 | 慢 | 高 | ⭐⭐⭐⭐ |

---

## 🎯 快速开始

```bash
# 完整流程
cp your_image.png test_images/
bash test.sh
# 输入: 1 ⏎
open ocr_output/
```

---

**享受交互式的 OCR 体验！** 🎉
